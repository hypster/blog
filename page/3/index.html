<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Souldough</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="souldough的个人博客，提供音乐信息教学，日剧影评，技术分享和生活杂感。">
<meta property="og:type" content="website">
<meta property="og:title" content="Souldough">
<meta property="og:url" content="https://hypster.github.io/page/3/index.html">
<meta property="og:site_name" content="Souldough">
<meta property="og:description" content="souldough的个人博客，提供音乐信息教学，日剧影评，技术分享和生活杂感。">
<meta property="og:locale" content="ch">
<meta property="article:author" content="Souldough">
<meta property="article:tag" content="souldough">
<meta property="article:tag" content=" 音樂">
<meta property="article:tag" content=" 日劇">
<meta property="article:tag" content=" web開發">
<meta property="article:tag" content="部落格，博客">
<meta name="twitter:card" content="summary">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://hypster.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-如何使用CORS进行跨域" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/24/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CORS%E8%BF%9B%E8%A1%8C%E8%B7%A8%E5%9F%9F/" class="article-date">
  <time datetime="2018-05-24T14:49:00.000Z" itemprop="datePublished">2018-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/24/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CORS%E8%BF%9B%E8%A1%8C%E8%B7%A8%E5%9F%9F/">如何使用CORS进行跨域</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>关于CORS，有很多的文章已经说得很清楚了，可以参考：<br><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Server-Side_Access_Control" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/HTTP/Server-Side_Access_Control</a><br><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/04/cors.html</a></p>
<p>本文主要关于CORS的具体实现，和一些具体注意事项：</p>
<p>本次将使用npm module下的CORS包，可以先<code>npm install CORS</code>安装</p>
<p>在添加一个文件<code>cors.js</code>,添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">'cors'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> whiteList = [<span class="string">'http://localhost:3000'</span>, <span class="string">'https://localhost:3433'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> corsOptions = <span class="function"><span class="keyword">function</span>(<span class="params">req, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _options</span><br><span class="line">  <span class="keyword">if</span>(req.headers.origin &amp;&amp; whiteList.indexOf(req.headers.origin) != <span class="number">-1</span>) &#123;</span><br><span class="line">    _options = &#123;<span class="attr">origin</span>: <span class="literal">true</span>&#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    _options = &#123;<span class="attr">origin</span>: <span class="literal">false</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  callback(<span class="literal">null</span>, _options)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.corsWithOption = cors(corsOptions)</span><br><span class="line">exports.cors = cors()</span><br></pre></td></tr></table></figure>

<p>上面的代码中，我们通过异步的方式来动态设置CORS的选项，当headers中的origin在白名单中时，我们就将添加Access-Control-Allow-Origin的header，并且其值会设为request header当中的origin值，否则将不设置CORS header。</p>
<p>我们同时输出默认的cors方法，其会自动设置<code>Access-Control-Allow-Origin：*</code>。</p>
<p>值得注意的是CORS是协议，主流的浏览器对CORS header都是支持的，在需要CORS的时候，浏览器会自动设置request header使得request可以符合CORS的规范，但是当用postman进行测试时，需要单独在header中设置相关的header，比如需要添加origin的header为在白名单中的地址。另外我们也可以看到即使origin设置成白名单之外的值，所做的CRUD操作依然会成功执行，这是因为postman并不执行CORS的标准。</p>
<p>如果要在postman模拟浏览器的行为，可以将<code>corsOption</code>替换为:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> corsOptions =  &#123;</span><br><span class="line">  origin: <span class="function"><span class="keyword">function</span>(<span class="params">origin, cb</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!origin) &#123;</span><br><span class="line">      <span class="keyword">return</span> cb(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'no origin is present'</span>), <span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(whiteList.indexOf(origin) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> cb(<span class="literal">null</span>, <span class="literal">true</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> cb(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'The CORS policy for this site does not allow access from the specified Origin.'</span>), <span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时的Access-Control-Allow-Origin只会设置为固定的值，并且在不允许CORS的情况下直接进行报错。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hypster.github.io/2018/05/24/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CORS%E8%BF%9B%E8%A1%8C%E8%B7%A8%E5%9F%9F/" data-id="ck6ebdoul000dgdwecs4w497l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/code/" rel="tag">code</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-观看电影「昼颜」引发的一些杂感" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/20/%E8%A7%82%E7%9C%8B%E7%94%B5%E5%BD%B1%E3%80%8C%E6%98%BC%E9%A2%9C%E3%80%8D%E5%BC%95%E5%8F%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9D%82%E6%84%9F/" class="article-date">
  <time datetime="2018-05-20T13:58:00.000Z" itemprop="datePublished">2018-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/20/%E8%A7%82%E7%9C%8B%E7%94%B5%E5%BD%B1%E3%80%8C%E6%98%BC%E9%A2%9C%E3%80%8D%E5%BC%95%E5%8F%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9D%82%E6%84%9F/">观看电影「昼颜」引发的一些杂感</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这周五晚上去看了电影「昼颜」。</p>
<p>不得不说最近电影院能看到的日本电影越来越多了，这或许跟日本人开始舔光腚总局屁股有关，不过为了市场，有时候舔舔也是需要的。</p>
<p>现在的天朝充斥着美式电影，相信美国人在这方面做生意的本领肯定是世界最高，我实在无法理解Marvel出的这些乱七八糟的电影怎么能在天朝获得这么多票房和粉丝。本身的文化价值相去甚远怎么能有这么多粉丝呢？难道那些人跟美国人一样是从小看着marvel漫画长大的么？</p>
<p>答案或许是当观众没有啥独立判断的时候，有些时候只要强行卖座就是最好的手段，原理就是：</p>
<blockquote><p>反正我也没啥可吃的东西，所以你给我喂啥我就吃啥。</p>
</blockquote>

<p>回到「昼颜」，其实这部电影早就在去年同一时间就在日本国内上映了，想要找到网上的版本也轻而易举，但是作为日剧粉，一定是要できるだけ支持一下的。</p>
<p>说到剧情，总体上这部电影比连续剧要拍得更唯美，当然也可能是单纯的少了几个搞笑人物的关系（铃木浩介不要打我），之前的连续剧已经将世人嗤之以鼻的不伦做了非常合理化的解释，而这部电影则将这个主题描述的非常诗意了，被妻子发现时北野和纱和都在规则限制的范围內进行着小孩过家家式的约会，甚至正在考虑需要割断越发危险的约会。是妻子发现之后的变态的行为让这段感情有了一个可以交代的地方。基本上正如妻子本人所言：</p>
<blockquote><p>虽然是你们不伦，但弄得都是我的不好。</p>
</blockquote>

<p>事实也的确是这样，这也是编剧下的一手好棋————将所有的外在因素都导向有利于“不伦”的一方：</p>
<ul>
<li><p>原本的受害者变成了加害者（如最终导致的间接杀人）。</p>
</li>
<li><p>原本的加害者变成了弱势的一方（一直是被动并且试图遵守社会规则）。</p>
</li>
<li><p>原家庭关系的冷淡（如没有共同话题、双方没有小孩）使得“拆散家庭”这样的道德上的讲法变成了值得商榷的争议。</p>
</li>
</ul>
<p>以上种种的因素，使得“用遵循传统的价值观来判案”变得尤为困难。</p>
<p>当然其实类似的探讨已经在连续剧播出的时候已经探讨过了，我也一直觉得没有什么探讨的必要，因为我一直秉持西方自由主义观点，认为每件事情都需要进行辩证的看待。。。好吧我编不下去了。。</p>
<p>其实我写这篇文章最初只是想说下彩姐的综合颜值实在太高了，难怪软银的孙正义能成为她的头号粉丝。彩姐的颜值不是那种一看就知道的，而是由内而外的，简单地讲就是那种感觉有事可以随时相谈的贤妻良母型，楚楚可人而且非常有亲切感。</p>
<p>另外彩姐的演技也不用提了，刚开始遇见的不安忐忑，热恋时的天真浪漫，发现“丈夫”说谎时的紧张焦虑，以及最后面对尸体的神不守舍，都是演得恰到好处。真的很有实力！</p>
<p>真不知道豆瓣上这部电影怎么被刷下来的，不过我也完全不在乎影评这些东西，在商业化的浪潮下这些东西早就不能当真了。</p>
<p>最后送上一波图片：</p>
<figure>![宣传海报](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1527424317&di=3abb6bfac9357ecc2b48d41102f01609&imgtype=jpg&er=1&src=http%3A%2F%2Fimgbdb2.bendibao.com%2Fshbdb%2F20184%2F30%2F2018430231052_93776.jpg)<figcaption>影片的情欲处理得很好</figcaption></figure>
<figure>![看萤火虫场景](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1527424596&di=44fd51ff7fd781083dcd1db0c4433f64&imgtype=jpg&er=1&src=http%3A%2F%2Fcrawl.nosdn.127.net%2Ff711892eafc61128a771e0034ae56f62.jpg)<figcaption>最后和男主一起看萤火虫场景十分浪漫</figcaption></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://hypster.github.io/2018/05/20/%E8%A7%82%E7%9C%8B%E7%94%B5%E5%BD%B1%E3%80%8C%E6%98%BC%E9%A2%9C%E3%80%8D%E5%BC%95%E5%8F%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9D%82%E6%84%9F/" data-id="ck6ebdovs000xgdweb08r0h27" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%97%A5%E5%89%A7/" rel="tag">日剧</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用jsonwebtoken来进行用户验证" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/18/%E4%BD%BF%E7%94%A8jsonwebtoken%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%94%A8%E6%88%B7%E9%AA%8C%E8%AF%81/" class="article-date">
  <time datetime="2018-05-18T12:42:00.000Z" itemprop="datePublished">2018-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/18/%E4%BD%BF%E7%94%A8jsonwebtoken%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%94%A8%E6%88%B7%E9%AA%8C%E8%AF%81/">使用jsonwebtoken来进行用户验证</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>考虑到服务器的升级扩容，基于session的用户验证就变得十分麻烦，使用token可以轻松实现服务器的无状态化（stateless server），本次将使用jsonwebtoken在node.js环境下进行token认证。</p>
<h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><figure class="highlight json"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">      <span class="attr">"body-parser"</span>: <span class="string">"^1.18.3"</span>,</span><br><span class="line">      <span class="attr">"express"</span>: <span class="string">"^4.16.3"</span>,</span><br><span class="line">      <span class="attr">"jsonwebtoken"</span>: <span class="string">"^8.2.1"</span>,</span><br><span class="line">      <span class="attr">"mongoose"</span>: <span class="string">"^5.1.1"</span>,</span><br><span class="line">      <span class="attr">"morgan"</span>: <span class="string">"^1.9.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="用户模型设置"><a href="#用户模型设置" class="headerlink" title="用户模型设置"></a>用户模型设置</h2><figure class="highlight js"><figcaption><span>user.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>)</span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  username: <span class="built_in">String</span>,</span><br><span class="line">  password: <span class="built_in">String</span>,</span><br><span class="line">  admin: <span class="built_in">Boolean</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">'User'</span>, user)</span><br></pre></td></tr></table></figure>
<p>用户模型只包含最简单的字段。</p>
<h2 id="路由设置"><a href="#路由设置" class="headerlink" title="路由设置"></a>路由设置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">apiRoutes.post(<span class="string">'/authenticate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  User.findOne(&#123;</span><br><span class="line">      username: req.body.username</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">user</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (user) &#123;</span><br><span class="line">        <span class="keyword">if</span> (req.body.password != user.password) &#123;</span><br><span class="line">          res.status(<span class="number">403</span>)</span><br><span class="line">            .json(&#123;</span><br><span class="line">              success: <span class="literal">false</span>,</span><br><span class="line">              message: <span class="string">'authentication failure. password incorrect'</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> payload = &#123;</span><br><span class="line">            admin: user.admin</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">var</span> token = jwt.sign(payload, app.get(<span class="string">'superSecret'</span>), &#123;</span><br><span class="line">            expiresIn: <span class="number">5184000</span></span><br><span class="line">          &#125;)</span><br><span class="line">          res.json(&#123;</span><br><span class="line">            success: <span class="literal">true</span>,</span><br><span class="line">            message: <span class="string">'enjoy your token'</span>,</span><br><span class="line">            token: token</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.status(<span class="number">403</span>)</span><br><span class="line">          .json(&#123;</span><br><span class="line">            success: <span class="literal">false</span>,</span><br><span class="line">            message: <span class="string">'authentication failure. user not exist'</span></span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      next(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>为了实现token的轻量化，在自定义的payload中尽量不要挂载太多的内容，这里只是将admin信息挂载上去。jwt提供sign的方法，只要传入payload，secret或证书。在选项里可以设置过期时间，除了填入数字秒也可以接受字符串格式，如‘1h’。或者可以直接在payload中加入jwt规范的exp，这里需要填入的是未来的时间点，单位同样为秒。</p>
<h2 id="校验token"><a href="#校验token" class="headerlink" title="校验token"></a>校验token</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">apiRoutes.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> token = req.body.token || req.query.token || req.headers[<span class="string">'x-access-token'</span>]</span><br><span class="line">  <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">    res.status(<span class="number">401</span>)</span><br><span class="line">      .json(&#123;</span><br><span class="line">        success: <span class="literal">false</span>,</span><br><span class="line">        message: <span class="string">'no token provided'</span></span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  jwt.verify(token, app.get(<span class="string">'superSecret'</span>), <span class="function"><span class="keyword">function</span>(<span class="params">err, decoded</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      res.status(<span class="number">401</span>).json(&#123;</span><br><span class="line">        success: <span class="literal">false</span>,</span><br><span class="line">        message: <span class="string">'failed to authenticate token'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      req.decoded = decoded</span><br><span class="line">      next()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>在需要访问控制的routes前面加入校验的中间件。jwt提供了verify的方法来校验token，只需传入token，secret和一个callback。</p>
<p>通过sign和verify，一个简单的token验证就实现了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hypster.github.io/2018/05/18/%E4%BD%BF%E7%94%A8jsonwebtoken%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%94%A8%E6%88%B7%E9%AA%8C%E8%AF%81/" data-id="ck6ebdou20005gdwe0w0h7hcr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/code/" rel="tag">code</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用passport进行用户验证" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/17/%E4%BD%BF%E7%94%A8passport%E8%BF%9B%E8%A1%8C%E7%94%A8%E6%88%B7%E9%AA%8C%E8%AF%81/" class="article-date">
  <time datetime="2018-05-17T08:35:00.000Z" itemprop="datePublished">2018-05-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/17/%E4%BD%BF%E7%94%A8passport%E8%BF%9B%E8%A1%8C%E7%94%A8%E6%88%B7%E9%AA%8C%E8%AF%81/">使用passport进行用户验证</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>passport是node.js环境下进行身份验证的组件。对于express这样的框架，可以直接作为中间件来使用。它通过不同的strategy来支持不同的认证类型，本次将使用<code>passport-local</code>做基于用户名和密码的身份认证。</p>
<h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><p>首先新建一个项目，可以使用<code>express-generator</code>初始化配置。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir 项目名称 &amp;&amp; <span class="built_in">cd</span> <span class="variable">$_</span></span><br><span class="line">express</span><br></pre></td></tr></table></figure>
<h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><p>对<code>package.json</code>添加如下依赖：</p>
<figure class="highlight json"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">      <span class="attr">"express-session"</span>: <span class="string">"^1.15.6"</span>,</span><br><span class="line">      <span class="attr">"mongodb"</span>: <span class="string">"3.0.8"</span>,</span><br><span class="line">      <span class="attr">"mongoose"</span>: <span class="string">"5.0.18"</span>,</span><br><span class="line">      <span class="attr">"passport"</span>: <span class="string">"^0.4.0"</span>,</span><br><span class="line">      <span class="attr">"passport-local"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">      <span class="attr">"passport-local-mongoose"</span>: <span class="string">"^5.0.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>安装依赖<code>npm install</code>。</p>
<h2 id="创建用户模型"><a href="#创建用户模型" class="headerlink" title="创建用户模型"></a>创建用户模型</h2><p>创建一个<code>model</code>文件夹，新建文件<code>user.js</code>,内容如下：</p>
<figure class="highlight js"><figcaption><span>user.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">let</span> Schema = mongoose.Schema;</span><br><span class="line"><span class="keyword">let</span> passportLocalMongoose = <span class="built_in">require</span>(<span class="string">'passport-local-mongoose'</span>)</span><br><span class="line"><span class="keyword">let</span> UserSchema = <span class="keyword">new</span> Schema(&#123;&#125;)</span><br><span class="line">UserSchema.plugin(passportLocalMongoose)</span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">'User'</span>, UserSchema)</span><br></pre></td></tr></table></figure>
<h2 id="连接mongodb"><a href="#连接mongodb" class="headerlink" title="连接mongodb"></a>连接mongodb</h2><p>对<code>app.js</code>添加mongodb连接：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line">mongoose.connect(<span class="string">'mongodb://localhost:27017/passport-test'</span>)</span><br><span class="line">.then(<span class="function"><span class="params">db</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'connected to mongodb'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="配置session"><a href="#配置session" class="headerlink" title="配置session"></a>配置session</h2><p>本次将使用session，所以我们添加session相关代码：</p>
<figure class="highlight js"><figcaption><span>app.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> expressSession = <span class="built_in">require</span>(<span class="string">'express-session'</span>);</span><br><span class="line">app.use(expressSession(&#123;</span><br><span class="line">  name: <span class="string">'session-test-id'</span>,</span><br><span class="line">  secret: <span class="string">'yourrandomsecrethere'</span>,</span><br><span class="line">  saveUninitialized: <span class="literal">false</span>,</span><br><span class="line">  resave: <span class="literal">false</span></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<p>也可以在配置选项里添加session存储的方式，这边默认为memory store。</p>
<h2 id="添加passport中间件"><a href="#添加passport中间件" class="headerlink" title="添加passport中间件"></a>添加passport中间件</h2><p>对<code>app.js</code>添加passport中间件：</p>
<figure class="highlight js"><figcaption><span>app.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> passport = <span class="built_in">require</span>(<span class="string">'passport'</span>);</span><br><span class="line"><span class="keyword">let</span> localStrategy = <span class="built_in">require</span>(<span class="string">'passport-local'</span>).Strategy;</span><br><span class="line">app.use(passport.initialize())</span><br><span class="line">app.use(passport.session())</span><br><span class="line">passport.use(localStrategy);</span><br><span class="line"><span class="keyword">let</span> User = <span class="built_in">require</span>(<span class="string">'./models/user'</span>)</span><br><span class="line">passport.use(<span class="keyword">new</span> localStrategy(User.authenticate()))</span><br><span class="line">passport.serializeUser(User.serializeUser());</span><br><span class="line">passport.deserializeUser(User.deserializeUser());</span><br></pre></td></tr></table></figure>

<h2 id="添加访问控制中间件"><a href="#添加访问控制中间件" class="headerlink" title="添加访问控制中间件"></a>添加访问控制中间件</h2><p>随后自定义一个验证的中间件，由于经过passport验证通过之后，会加入req.user属性，所以可以直接使用它做判断：</p>
<figure class="highlight js"><figcaption><span>app.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">auth</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(req.user) &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> err = <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'not authenticated'</span>)</span><br><span class="line">    err.status  = <span class="number">401</span></span><br><span class="line">    next(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于<code>/users</code>的路由将会用来做认证，所以在<code>app.use(&#39;/users&#39;, users)</code>后面添加刚才的<code>auth</code>中间件</p>
<figure class="highlight js"><figcaption><span>app.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(auth);</span><br></pre></td></tr></table></figure>

<h2 id="添加用户路由"><a href="#添加用户路由" class="headerlink" title="添加用户路由"></a>添加用户路由</h2><p>对routes/user.js文件添加下面路由</p>
<figure class="highlight js"><figcaption><span>user.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> User = <span class="built_in">require</span>(<span class="string">'../models/user'</span>);</span><br><span class="line"><span class="keyword">let</span> passport = <span class="built_in">require</span>(<span class="string">'passport'</span>);</span><br><span class="line"><span class="keyword">let</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line">router.use(bodyParser.json());</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'signup'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  User.register(&#123;<span class="attr">username</span>: req.body.username&#125;, req.body.password, (err, user) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) &#123;</span><br><span class="line">      res.statusCode = <span class="number">500</span></span><br><span class="line">      res.setHeader(<span class="string">'content-type'</span>, <span class="string">'application/json'</span>)</span><br><span class="line">      res.json(&#123;<span class="attr">err</span>: err&#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      passport.authenticate(<span class="string">'local'</span>)(req, res, () =&gt; &#123;</span><br><span class="line">        res.statusCode = <span class="number">200</span>;</span><br><span class="line">        res.setHeader(<span class="string">'content-type'</span>, <span class="string">'application/json'</span>);</span><br><span class="line">        res.json(&#123;<span class="attr">success</span>: <span class="literal">true</span>, <span class="attr">status</span>: <span class="string">'registration successful'</span>&#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;) </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/login'</span>, passport.authenticate(<span class="string">'local'</span>), <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.status = <span class="number">200</span></span><br><span class="line">  res.setHeader(<span class="string">'content-type'</span>, <span class="string">'application/json'</span>)</span><br><span class="line">  <span class="keyword">return</span> res.json(&#123;<span class="attr">success</span>: <span class="literal">true</span>, <span class="attr">status</span>: <span class="string">'login successful'</span>&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这样就可以对用户进行验证了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hypster.github.io/2018/05/17/%E4%BD%BF%E7%94%A8passport%E8%BF%9B%E8%A1%8C%E7%94%A8%E6%88%B7%E9%AA%8C%E8%AF%81/" data-id="ck6ebdoud0008gdwedok5hbe6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/code/" rel="tag">code</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-小时候听的一些杂七杂八的音乐" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/09/%E5%B0%8F%E6%97%B6%E5%80%99%E5%90%AC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E9%9F%B3%E4%B9%90/" class="article-date">
  <time datetime="2018-05-09T17:37:00.000Z" itemprop="datePublished">2018-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/09/%E5%B0%8F%E6%97%B6%E5%80%99%E5%90%AC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E9%9F%B3%E4%B9%90/">小时候听的一些杂七杂八的音乐</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>小的时候经常会买一些稀奇古怪的唱片来听。</p>
<p>那时候有家唱片店叫拉阔音乐，有很多流行歌，第一张专辑买的是许志安的什么专辑，为什么买好像是有首歌叫你为什么背着我爱别人， 那时特别火， 唱片店里也在放，应该是小学四五年级吧，那时候听首情歌都脸红不行，现在的小学生应该不会这样了吧。</p>
<p>这家唱片店很快关门了，但是同时还有一家唱片店卖很多打口碟，我在那里买了很多好货。给我印象很深的是千禧年时期的很多专辑。那时候网络才刚刚普及，社会上都在恐慌蠕虫病毒，对于新的千年，还流传着很多的预言，作为一个中二的对着未来有着无尽好奇的小学生，这简直就是最好的年代了。就是在那个时候买了很多disco的专辑，很多都是合辑，都是起个best of+年代之类的名字[^1]，印象比较深的几首包括来自Toy-box的Tarzan &amp; Jane，翻成中文就是泰山和珍妮，相信玩过跳舞毯的人对这首歌都不会陌生。还有SMiLE.dk的butterfly。</p>
<figure>![best99专辑封面](https://gss3.bdstatic.com/7Po3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=0dd93d6e17178a82ce3c78a6ce3814b0/8435e5dde71190eff939557dc71b9d16fcfa6056.jpg)<figcaption>封面就是长这样的</figcaption></figure>

<p>那个时候英文非常駄目，也听不懂在说什么，但是基本上里面的歌词用的都是很简单的词汇，后来才知道这样的曲风叫Eurodance/bubblegum。关于Eurodance，给人的感觉就是歌都唱得很呆萌，好像随时都在跟小孩做游戏的感觉。另外顾名思义，发家在欧洲，主要在北欧一代，丹麦占了其中的大头，如toy-box，SMiLE.dk，daze，dr.Bombay, papaya，荷兰有vengaboys。南欧的意大利也有一些如gelato。</p>
<p>这些歌曲的歌词大都都很好玩。特别是丹麦的歌曲，不愧是安徒生的故乡，所有的创作都带有非常卡通的故事色彩。比如这首Calcutta (Taxi, Taxi, Taxi)，唱的人是丹麦的dr.Bombay，虽然别人是丹麦人，但是歌如其名，都带着浓浓的咖喱味，里面歌词也很有画面感，讲的是一个小伙没钱了去投奔加尔各答开出租的叔叔，但由于不认路没人乘他的车，但是还是一直觉得坐出租车司机很开心的故事，感觉就像是在看一部印度电影。还有比如Tarzan &amp; Jane这首歌，讲的就是人猿泰山的浪漫故事。</p>
<p>有些歌的旋律曲调也很有意思。比如gelato的经典歌曲penguin’s game, 中文给翻成了兔子舞，大概看了mv人家在跳舞，但不知道什么舞就叫兔子舞了，但人家明明是在跳企鹅舞好嘛。这首歌在欧洲有多个语言版本，可见其风靡程度。这首歌调子是很古典的小调风格，又让人很欢快，非常让人耳目一新，感觉小丑随时都会出来的感觉。所以我觉得这种style细细品味真的蛮有意思的，唱的是英文，载体是电音，但是内容和曲式还是能感觉到欧洲的文化特征。</p>
<div class="video-container"><iframe src="https://www.youtube.com/embed/3jynwzWYBQs" frameborder="0" loading="lazy" allowfullscreen></iframe></div>


    <div id="aplayer-wJzZFTTk" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="1792796553" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-aLSGKsHO" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="3491709" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-gCKHJqyI" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="2243056" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-FuSdippo" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="2243016" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-RRzbMHyQ" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="1776206819" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-SFJvUzBx" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="1770180056" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-wslidnts" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="1842630" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-nmCMwPvr" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="1770180056" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-BZGjPBTR" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="438457" data-server="xiami" data-type="album" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>

<p>千禧年还有一个不得不提的风格，就是new age风格，中文叫新世纪音乐，像什么英格玛（enigma）呀，班得瑞啊，乔治·温斯顿（George winston）呀， 神秘园呀，Michael Hedges呀（Michael真是可惜啊），各种个样的，什么封面上有个大佛的，有个地中海岛屿的，我一直挺喜欢这种ambient的音乐的，如果现在一些公共场所能放些这种音乐也是挺不错的。</p>
<p>其中Enigma是我最喜欢的，这是一个出自德国制作人Michael Cretu的project。The Cross of Changes和Le Roi est Mort, Vive le Roi!可能是我听过次数最多的几张专辑了（小的时候不像现在有互联网，再加上这一开始是我父亲买的专辑，他在家里经常反复放）。前面一张里面用了很多少数民族的采样，后面一张还引入了格里高利的圣咏（个人理解通俗点就是中世纪老外和尚念的经）的采样，似乎没得到许可啥的，弄了很大的官司，但是实在太经典了，我相信那个年代的人多多少少都听过他的音乐。</p>

    <div id="aplayer-osIGUfsG" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="1510971" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-MNnCQInH" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="1511287" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>


    <div id="aplayer-GgdqmuLp" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="1850547" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>

<p><del>还买过各种轻音乐，像什么詹姆斯高威，保罗莫里哀，那时这个在大陆也很流行，听不来古典听轻音乐呗。</del></p>
<p><del>当然还买了很多别的摇滚类的，什么穷街，枪花，Pink Floyd,Scorpions等，那时候还挺迷的。</del></p>
<p>有段时间还很迷黑人说唱，不是匪帮说唱那种，应该说嘻哈更为准确，比如说唱歌手will smith，甚至王力宏那个时期也有几首嘻哈我也蛮喜欢的，那时候有部电影叫men in black，里面很多歌都很喜欢，好像那时候的篮球集锦里面很多也放这个。我还是喜欢积极向上的嘻哈，哈哈。</p>

    <div id="aplayer-qBampwDk" class="aplayer aplayer-tag-marker meting-tag-marker"
         data-id="2012969" data-server="xiami" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"
    ></div>

<p>要罗列我小时候听的所有歌曲基本上不现实的，有时间的话可能会出第二辑，但这些算是我第一印象中很深的几首，特别是eurodance和new age的风格，对于当时的我来说是非常不一样的聆听体验。另外现在知道的人似乎也逐渐少了，是以为纪念。<br>[^1] 百度百科词条BEST 99 - <a href="https://baike.baidu.com/item/BEST%2099" target="_blank" rel="noopener">https://baike.baidu.com/item/BEST%2099</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hypster.github.io/2018/05/09/%E5%B0%8F%E6%97%B6%E5%80%99%E5%90%AC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E9%9F%B3%E4%B9%90/" data-id="ck6ebdov0000kgdwe3aks9i14" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9F%B3%E4%B9%90/" rel="tag">音乐</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">Next &amp;raquo;</a>
  </nav>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Souldough<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>